# TOMODACHI留学 LP - 最終実装内容とVS Code作業手順

## 📋 実装した修正内容の全体整理

### 第1回修正（6つの問題）- 2026年2月14日

| 問題 | 実装した解決策 | 行番号 | 詳細 |
|------|--------------|--------|------|
| 1. デスクトップメニューでセクションタイトルが隠れる | **CSS: scroll-margin-top** | 11-24行目 | `section { scroll-margin-top: 100px; }` をCSSに追加。スムーススクロールも実装。 |
| 2. モバイルでハンバーガーメニューが開かない | **JavaScriptを完成** | 1341-1367行目 | 途中で切れていたJavaScriptを完全なコードに置き換え。メニュー外クリックで閉じる機能も追加。 |
| 3. モバイルでキャッチコピーを大きく | **clamp()の最小値変更** | 90行目 | `clamp(1.75rem,7vw,3.75rem)` → `clamp(2rem,7vw,3.75rem)` (28px → 32px) |
| 4. 95%/96%バッジがはみ出す | **サイズ縮小＋間隔調整** | 118-130行目 | 画像幅を80px→60pxに縮小。要素間隔を`gap-4`→`gap-2`、バッジ間を`gap-1`→`gap-0.5`に変更。 |
| 5. CTAボタンが大きい | **サイズ調整** | 108-110行目 | モバイル: `text-2xl px-8 py-4` → `text-xl px-6 py-3`、デスクトップ: `text-3xl px-10 py-5` → `text-2xl px-8 py-4` |
| 6. カッコ文が長い | **レスポンシブ改行** | 758行目 | `<br class="md:hidden">` でモバイルのみ改行。カッコ部分を `text-sm text-gray-600` で小さく表示。 |

#### 採用しなかった代替案
- **問題1**: JavaScriptでのスクロール制御 → CSSの方がシンプルで保守性が高い
- **問題4**: `flex-wrap`で改行 → デザイン的に好ましくない
- **問題6**: テキストを短くする → 情報量を減らしたくない

---

### 第2回修正（追加10項目）- 2026年2月14日

| 項目 | 実装した解決策 | 行番号 | 詳細 |
|------|--------------|--------|------|
| 1. アシストコース/海外4名のカッコ文折り返し | **レスポンシブ改行を適用** | 760, 767行目 | `<br class="md:hidden">` と `text-sm text-gray-600` を追加 |
| 2. メニューに「参加者の声」追加 | **メニュー項目追加＋ID付与** | 53, 75, 258行目 | デスクトップ・モバイルメニューに一番左/上に追加。セクションに `id="voices"` を付与。 |
| 3. CTAボタンのリンク先変更 | **#contact → #flow** | 57, 80, 108, 1126行目 | 「無料体験に申し込む」「今すぐ無料体験を予約」すべてを「無料体験までの流れ」セクションへ。セクションに `id="flow"` を付与。 |
| 4. 漫画の枠を細く | **border-4 → border-2** | 171, 174行目 | 紺とオレンジの枠が目立ちすぎるため半分の厚さに。 |
| 5. 参加者の声のフォントサイズ調整 | **一括変更** | 複数箇所 | 英検: `text-xs` → `text-sm`、コメント: `text-sm` → `text-base`。「Student voice」を全削除。 |
| 6. 出身校の地域名変更 | **関東以北→東日本、中部以西→西日本** | 213, 227行目 | 新潟を西日本から東日本（福島の後）に移動。 |
| 7. 出身校のプレビュー表示 | **summaryに学校名追加** | 211-220, 225-234, 236-245行目 | タップ前に優秀校を見せる。「東京（女子学院/駒場東邦...）神奈川（聖光学院...）他」など。 |
| 8. 「中学1年生〜高校3年生」をオレンジ色に | **text-gray-900 → text-[#f97316]** | 758行目 | 対象をより目立つように。 |
| 9. グループ構成/レッスン時間の上の色変更 | **薄い色に変更** | 763, 773行目 | グループ構成: `#1e3a8a` → `#60a5fa` (薄いブルー)、レッスン時間: `#f97316` → `#fb923c` (薄いオレンジ) |
| 10. 保護者メッセージの背景色を薄く | **#fed7aa → #ffe4cc** | 1265行目 | より薄いオレンジに変更して柔らかい印象に。 |

---

## 🎨 色の一覧（参考）

| 要素 | 色コード | 説明 |
|------|---------|------|
| メインブルー（濃） | #1e3a8a | ロゴ、見出し、メニュー |
| メインオレンジ | #f97316 | CTA、アクセント |
| 薄いブルー | #60a5fa | グループ構成ボックス上部 |
| 薄いオレンジ | #fb923c | レッスン時間ボックス上部 |
| 背景オレンジ（薄） | #ffe4cc | 保護者メッセージ背景 |

---

## 💻 VS Code での作業手順

### ステップ1：現在の作業状況を確認

VS Code でプロジェクトフォルダを開いている状態から始めます。

```bash
# ターミナルで現在のステータスを確認
git status
```

**確認事項：**
- 未コミットの変更がある場合は、まずコミットするか決定
- 重要な変更がある場合は先にコミット推奨

---

### ステップ2：現在の index.html をバックアップ

```bash
# ファイル名に日付を付けてバックアップ
cp index.html index_backup_20260214_before.html

# または、Gitでコミットしてから作業する場合
git add index.html
git commit -m "バックアップ: 修正前の状態を保存"
```

**ポイント：**
- バックアップは必須！問題があった時に戻せる
- ファイル名に日付を入れると管理しやすい

---

### ステップ3：新しい index.html を配置

#### 方法A：ファイル名を変更して置き換え（推奨）

```bash
# 1. 現在の index.html を別名に変更（既にバックアップ済みの場合は不要）
mv index.html index_old.html

# 2. index_修正済み.html を index.html に名前変更
mv index_修正済み.html index.html
```

#### 方法B：上書きコピー

```bash
# index_修正済み.html を index.html として上書き
cp index_修正済み.html index.html
```

---

### ステップ4：VS Code で確認

#### A. ファイルが更新されたことを確認

1. VS Code の左側のエクスプローラーで `index.html` をクリック
2. ファイルの内容が表示される
3. **自動的に新しい内容が読み込まれる**（VS Code は自動でファイル変更を検知）

**もし更新されない場合：**
- `Ctrl+R` (Windows/Linux) または `Cmd+R` (Mac) でリロード
- または、VS Code 自体を再起動

#### B. Git の変更を確認

VS Code の左側の「ソース管理」アイコンをクリック（または `Ctrl+Shift+G`）

- 変更されたファイルが表示される
- `index.html` の変更内容を確認できる

#### C. ブラウザでプレビュー

1. **Live Server を使用している場合：**
   - `index.html` を右クリック → "Open with Live Server"
   - 自動的にブラウザが開く

2. **Live Server がない場合：**
   - `index.html` をダブルクリックしてブラウザで開く
   - または、`Ctrl+O` でファイルを開く

---

### ステップ5：画像ファイルの確認

修正済みHTMLは以下の画像を参照しています：

```
images/
  ├── TOMODACHI留学ロゴ_s.jpg
  ├── 96_顧客満足度_s.jpg
  ├── 95_学習意欲向上_s.jpg
  ├── tden-hero.jpg
  ├── book.jpg
  ├── newspaper.jpg
  ├── 悩み1.jpg
  ├── 悩み2.jpg
  ├── 解決1.jpg
  └── 解決2.jpg
```

**確認コマンド：**
```bash
ls -la images/
```

すべての画像が `images/` フォルダにあることを確認してください。

---

### ステップ6：動作確認

#### チェックリスト

##### モバイル表示（Chrome DevTools: `Ctrl+Shift+M`）

- [ ] ハンバーガーメニューをクリックでメニューが開く
- [ ] メニューに「参加者の声」が一番上に表示される
- [ ] メニューリンクをクリックでメニューが閉じる
- [ ] 「参加者の声」をクリックで該当セクションに飛ぶ
- [ ] 95%/96%バッジがはみ出していない
- [ ] キャッチコピー「先生じゃなく〜」が大きく表示される
- [ ] CTAボタン「今すぐ無料体験を予約」が適度なサイズ
- [ ] カッコ文「（高2/高3は...）」「（日本語サポート...）」「（インドネシア...）」が改行されている

##### デスクトップ表示

- [ ] メニューに「参加者の声」が一番左に表示される
- [ ] メニューリンクをクリックでセクションタイトルが見える（隠れない）
- [ ] 95%/96%バッジが適切なサイズ
- [ ] CTAボタンが適度なサイズ
- [ ] カッコ文が1行で表示される（改行されない）
- [ ] 出身校の「東日本」「西日本」に学校プレビューが表示される

##### 細かい確認

- [ ] 参加者の声の「英検準2級」などが読みやすいサイズ
- [ ] 参加者の声のコメントが読みやすいサイズ
- [ ] 海外生徒の「Student voice」が表示されない
- [ ] 出身校の「東日本」「西日本」「海外」の表記
- [ ] 新潟が「東日本」に含まれている
- [ ] 「中学1年生〜高校3年生」がオレンジ色
- [ ] グループ構成とレッスン時間のボックス上部の色が薄い
- [ ] 保護者メッセージの背景がより薄いオレンジ
- [ ] 漫画の枠が細い（border-2）

---

### ステップ7：Git でコミット

すべての動作確認が完了したら、変更をコミットします。

```bash
# 変更をステージング
git add index.html

# コミットメッセージを付けてコミット
git commit -m "修正完了: 16項目の改善を実施

- メニューに参加者の声を追加
- CTAボタンのリンク先を無料体験までの流れに変更
- カッコ文の改行対応（3箇所）
- フォントサイズ調整（キャッチコピー、参加者の声）
- 出身校の地域名変更と新潟移動
- 学校プレビュー表示追加
- デザイン調整（枠の厚さ、色の調整）
- JavaScriptとCSSの改善"

# リモートにプッシュ
git push origin main
# （ブランチ名がmasterの場合は: git push origin master）
```

---

### ステップ8：Cloudflare Pages で確認

1. **Cloudflare Pages ダッシュボードにアクセス**
   - https://dash.cloudflare.com/

2. **デプロイ状況を確認**
   - プロジェクトを選択
   - 最新のデプロイが「Building」または「Success」になるまで待つ（1-3分）

3. **公開URLで確認**
   - デプロイ完了後、公開URLにアクセス
   - ブラウザのキャッシュをクリア（`Ctrl+Shift+R` または `Cmd+Shift+R`）
   - すべての修正が反映されているか確認

---

## 🔧 トラブルシューティング

### Q1: VS Code でファイルが更新されない

**解決策：**
1. `Ctrl+R` (Windows/Linux) または `Cmd+R` (Mac) でリロード
2. ファイルを閉じて再度開く
3. VS Code を再起動

---

### Q2: ブラウザで古い表示が残っている

**解決策：**
1. **ハードリロード**
   - Windows/Linux: `Ctrl+Shift+R`
   - Mac: `Cmd+Shift+R`

2. **キャッシュをクリア**
   - Chrome: `Ctrl+Shift+Delete` → キャッシュをクリア

3. **シークレットウィンドウで確認**
   - `Ctrl+Shift+N` (Windows/Linux)
   - `Cmd+Shift+N` (Mac)

---

### Q3: 画像が表示されない

**原因：** 画像ファイルのパスが間違っている、または画像がない

**解決策：**
1. `images/` フォルダに画像がすべてあるか確認
   ```bash
   ls -la images/
   ```

2. ファイル名が正確か確認（大文字小文字、スペース）

3. HTMLのパスが正しいか確認
   ```html
   <!-- 正しい -->
   <img src="images/TOMODACHI留学ロゴ_s.jpg">
   
   <!-- 間違い -->
   <img src="TOMODACHI留学ロゴ_s.jpg">  <!-- images/ がない -->
   ```

---

### Q4: Git でコンフリクトが発生

**解決策：**
1. **現在の変更を一時的に退避**
   ```bash
   git stash
   ```

2. **最新の状態を取得**
   ```bash
   git pull origin main
   ```

3. **退避した変更を戻す**
   ```bash
   git stash pop
   ```

4. **コンフリクトを解決してコミット**

---

### Q5: index.html が2つある

**状況：** `index.html` と `index_修正済み.html` が両方ある

**解決策：**
```bash
# 古いファイルを削除（バックアップ済みの場合）
rm index_old.html

# または、.gitignoreに追加して無視
echo "index_修正済み.html" >> .gitignore
echo "index_backup_*.html" >> .gitignore
```

---

## 📚 参考情報

### VS Code の便利なショートカット

| 操作 | Windows/Linux | Mac |
|------|---------------|-----|
| ファイル検索 | `Ctrl+P` | `Cmd+P` |
| 文字列検索 | `Ctrl+F` | `Cmd+F` |
| 全体検索 | `Ctrl+Shift+F` | `Cmd+Shift+F` |
| 置換 | `Ctrl+H` | `Cmd+Option+F` |
| ターミナルを開く | `Ctrl+` (backtick) | `Cmd+` (backtick) |
| ソース管理 | `Ctrl+Shift+G` | `Cmd+Shift+G` |
| ファイルを閉じる | `Ctrl+W` | `Cmd+W` |
| すべて保存 | `Ctrl+K S` | `Cmd+K S` |

### Git の基本コマンド

```bash
# 現在の状況を確認
git status

# 変更をステージング
git add ファイル名
git add .  # すべての変更

# コミット
git commit -m "メッセージ"

# リモートにプッシュ
git push origin main

# 最新の状態を取得
git pull origin main

# コミット履歴を確認
git log --oneline

# 直前のコミットを取り消し（変更は保持）
git reset --soft HEAD~1
```

---

## ✅ 作業完了後の最終確認

- [ ] バックアップファイルを作成した
- [ ] 新しい index.html が正しく配置された
- [ ] VS Code でファイル内容を確認した
- [ ] ブラウザでローカル表示を確認した
- [ ] モバイルとデスクトップの両方で確認した
- [ ] すべてのチェック項目をクリアした
- [ ] Git でコミットした
- [ ] リモートにプッシュした
- [ ] Cloudflare Pages で公開版を確認した
- [ ] 問題なければバックアップファイルを整理した

---

## 🎉 完了！

お疲れ様でした！すべての修正が完了しました。

何か問題があれば、バックアップファイルからいつでも復元できます。

```bash
# 問題があった場合の復元方法
cp index_backup_20260214_before.html index.html
git checkout index.html  # または Git から復元
```
